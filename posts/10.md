---
title: 자바스크립트에서 클로저란?
date: '2023-09-19'
tags: [자바스크립트, 코딩]
---
# 클로저 (Closure)

자바스크립트에서는 모르게 사용하게 되는 중요한 기능 중 하나가 바로 '클로저'입니다. 변수나 반복문처럼 기본적인 개념으로도 볼 수 있는데, 그렇다면 이 클로저에 대해 자세히 알아볼까요?

## 클로저란?

간단히 말해서 클로저는 함수가 정의될 때의 환경(변수, 스코프 등)을 기억하는 현상을 의미합니다.

구체적으로 정의해보면:
> 클로저는 함수가 그 함수가 정의된 스코프 외부에서 실행될 때, 그 함수가 정의될 때의 스코프에 있는 변수들에 접근할 수 있는 것을 의미합니다.

이러한 성질로 인해 클로저는 다음과 같은 특징을 가집니다:
1. 클로저는 함수의 일부로만 발생합니다. 객체는 클로저를 생성하지 않습니다.
2. 클로저를 관찰하려면 함수를 원래 정의된 스코프와 다른 스코프에서 실행해야 합니다.

## 클로저 예제

```javascript
function makeCounter() {
    let num = 0;
    return function() {
        return num++;
    }
}

const counter1 = makeCounter();
const counter2 = makeCounter();

console.log(counter1());  // 0
console.log(counter1());  // 1
console.log(counter2());  // 0
console.log(counter1());  // 2
```

여기서 `makeCounter` 함수는 내부 함수를 반환하며, 이 내부 함수는 `num` 변수를 참조합니다. 각각의 `counter1`과 `counter2`는 `makeCounter` 함수의 다른 실행 결과로 만들어진 클로저를 가지기 때문에 `num`을 독립적으로 유지합니다.

## 클로저와 메모리  

일반적으로 함수의 실행이 끝나면 그 스코프의 지역 변수들은 메모리에서 해제됩니다. 그런데 클로저 덕분에, 내부 함수가 외부 함수의 변수에 접근할 수 있게 되면 그 변수는 메모리에서 해제되지 않습니다.

이것은 클로저가 변수의 스냅샷이 아닌 실제 변수 자체에 접근하기 때문입니다. 이를 통해 변수의 값을 시간이 지나도 변경하거나 갱신할 수 있습니다.

## 클로저의 활용

비동기 코드에서 클로저는 특히 중요합니다. 예를 들어:

```javascript
function fetchData(api) {
    fetch(api).then(function(response) {
        console.log(`데이터를 가져옴: ${api}: ${response.data}`);
    });
}

fetchData("https://api.example.com/data");
```

여기서 `response` 함수는 `api` 변수에 대한 클로저를 생성하여, `fetch` 요청이 완료될 때까지 `api` 변수를 "기억"합니다.

## 결론

클로저는 프로그래밍에서 중요한 개념 중 하나입니다. 특히 자바스크립트에서는 클로저를 활용하지 않고는 효과적인 프로그래밍이 거의 불가능합니다. 따라서 클로저에 대한 이해는 필수적입니다.
